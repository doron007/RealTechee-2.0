{
  "dashboards": {
    "production": {
      "name": "RealTechee-Production-Dashboard",
      "widgets": [
        {
          "type": "metric",
          "title": "Application Health",
          "metrics": [
            {"namespace": "AWS/Amplify", "metricName": "RequestCount", "dimensions": {"AppId": "d200k2wsaf8th3", "BranchName": "prod-v2"}},
            {"namespace": "AWS/Amplify", "metricName": "ErrorCount", "dimensions": {"AppId": "d200k2wsaf8th3", "BranchName": "prod-v2"}}
          ]
        },
        {
          "type": "metric",
          "title": "Lambda Functions Performance",
          "metrics": [
            {"namespace": "AWS/Lambda", "metricName": "Duration", "dimensions": {"FunctionName": "amplify-realtecheeclone-production-sandbox-70796fa803-notificationProcessor"}},
            {"namespace": "AWS/Lambda", "metricName": "Duration", "dimensions": {"FunctionName": "amplify-realtecheeclone-production-sandbox-70796fa803-userAdmin"}},
            {"namespace": "AWS/Lambda", "metricName": "Duration", "dimensions": {"FunctionName": "amplify-realtecheeclone-production-sandbox-70796fa803-statusProcessor"}}
          ]
        },
        {
          "type": "metric",
          "title": "DynamoDB Performance",
          "metrics": [
            {"namespace": "AWS/DynamoDB", "metricName": "ConsumedReadCapacityUnits", "dimensions": {"TableName": "Requests-localsandbox-NONE"}},
            {"namespace": "AWS/DynamoDB", "metricName": "ConsumedWriteCapacityUnits", "dimensions": {"TableName": "Requests-localsandbox-NONE"}},
            {"namespace": "AWS/DynamoDB", "metricName": "ThrottleEvents", "dimensions": {"TableName": "Requests-localsandbox-NONE"}}
          ]
        },
        {
          "type": "log",
          "title": "Recent Application Errors",
          "query": "fields @timestamp, @message | filter @message like /ERROR/ | sort @timestamp desc | limit 20",
          "region": "us-west-1",
          "logGroups": [
            "/aws/lambda/amplify-realtecheeclone-production-sandbox-70796fa803-notificationProcessor",
            "/aws/lambda/amplify-realtecheeclone-production-sandbox-70796fa803-userAdmin",
            "/aws/lambda/amplify-realtecheeclone-production-sandbox-70796fa803-statusProcessor"
          ]
        }
      ]
    }
  },
  "alarms": [
    {
      "name": "RealTechee-Production-HighErrorRate",
      "description": "Alert when error rate exceeds 5% in production",
      "metricName": "ErrorCount",
      "namespace": "AWS/Amplify",
      "dimensions": {"AppId": "d200k2wsaf8th3", "BranchName": "prod-v2"},
      "threshold": 5,
      "comparisonOperator": "GreaterThanThreshold",
      "evaluationPeriods": 2,
      "period": 300,
      "statistic": "Sum",
      "actions": {"alarm": ["arn:aws:sns:us-west-1:403266990862:realtechee-production-alerts"]}
    }
  ]
}
